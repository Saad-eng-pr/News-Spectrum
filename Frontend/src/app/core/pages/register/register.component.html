<app-header-layout></app-header-layout>
<app-sidebar></app-sidebar>

<div class="register-container">
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>
  <h2>Inscription</h2>
  <form (ngSubmit)="onRegister(registerForm)" #registerForm="ngForm">
    <div class="form-group">
      <input 
        type="text" 
        id="name" 
        [(ngModel)]="name" 
        name="name" 
        #nameInput="ngModel"
        required
        [class.input-valid]="isValid(nameInput)"
        [class.input-error]="hasError(nameInput)"
      >
      <label for="name">Nom</label> 
    </div>

    <div class="form-group">
      <input 
        type="email" 
        id="email" 
        [(ngModel)]="email" 
        name="email" 
        #emailInput="ngModel"
        required
        [class.input-valid]="isValid(emailInput)"
        [class.input-error]="hasError(emailInput)"
      >
      <label for="email">Email</label>
    </div>

    <div class="form-group">
      <input 
        type="password" 
        minlength="8"
        pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
        id="password"
        [(ngModel)]="password" 
        name="password" 
        #passwordInput="ngModel"
        required
        [class.input-valid]="isValid(passwordInput)"
        [class.input-error]="hasError(passwordInput)"
      >
      <label for="password">Mot de passe</label>
      <div *ngIf="passwordInput.errors?.['minlength']" class="error-hint">
        Minimum 8 caractères
      </div>
      <div *ngIf="passwordInput.errors?.['pattern']" class="error-hint">
        Doit contenir majuscule, minuscule et chiffre
      </div>
    </div>

    <button type="submit">S'inscrire</button>
  </form>
  <p>Déjà un compte ? <a routerLink="/login">Se connecter</a></p>
</div>
